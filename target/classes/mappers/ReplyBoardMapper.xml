<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.sw.dao.ReplyBoardDao">

    <!-- 댓글 등록 -->
   <insert id="insertReply" parameterType="com.sw.dto.ReplyBoardDto">
	    <![CDATA[
	    INSERT INTO REPLY_BOARD (rno, r_writer, r_content, r_writedate, r_p_board_bno)
	    VALUES (SEQ_R_BOARD.NEXTVAL, #{rWriter, jdbcType=VARCHAR}, #{rContent}, SYSDATE, #{rPBoardBno})
	    ]]>
	</insert>


    <!-- 댓글 리스트 -->
    <select id="getRepliesByBoardBno" parameterType="int" resultType="com.sw.dto.ReplyBoardDto">
	    <![CDATA[
	        SELECT 
	            rno,
	            r_writer AS r_writer,
	            r_content AS r_content,
	            r_writedate AS r_writedate,
	            r_p_board_bno AS r_p_board_bno
	        FROM REPLY_BOARD
	        WHERE r_p_board_bno = #{bno}
	        ORDER BY rno DESC
	    ]]>
	</select>



   
    <!-- 댓글 삭제 -->
    <delete id="deleteReply" parameterType="int">
         <![CDATA[
       		  DELETE FROM REPLY_BOARD WHERE rno = #{rno}
         ]]>
    </delete>
    
    <select id="getReplyByRno" parameterType="int" resultType="com.sw.dto.ReplyBoardDto">
	    <![CDATA[
	        SELECT 
	            rno,
	            r_writer AS r_writer,
	            r_content AS r_content,
	            r_writedate AS r_writedate,
	            r_p_board_bno AS r_p_board_bno
	        FROM REPLY_BOARD
	        WHERE rno = #{rno}
	    ]]>
	</select>

  
    <update id="updateReply" parameterType="com.sw.dto.ReplyBoardDto">
	   	<![CDATA[
		    UPDATE REPLY_BOARD
		    SET r_content = #{rWriter, jdbcType=VARCHAR}
		    WHERE rno = #{rno}
	    ]]>
	</update>
    
   
</mapper>
